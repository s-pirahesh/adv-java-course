<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ù…Ø­ØªÙˆØ§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø¬Ø§Ù…Ø¹ Ø¯Ø±Ø³ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ (Ø¬Ø§ÙˆØ§) - Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ø¢Ø²Ø§Ø¯ ØªØ¨Ø±ÛŒØ²">
    <meta name="author" content="Ø³ÛŒØ¯ Ø³Ø¬Ø§Ø¯ Ù¾ÛŒØ±Ø§Ù‡Ø´">
    <title>Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ (Ø¬Ø§ÙˆØ§) - Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ø¢Ø²Ø§Ø¯ ØªØ¨Ø±ÛŒØ²</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
            /* ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ */
            background-color: #667eea;
            background-image: linear-gradient(135deg, rgba(102, 126, 234, 0.9) 0%, rgba(118, 75, 162, 0.9) 100%), url('assets/images/course-bg.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-blend-mode: overlay;
            min-height: 100vh;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .phase-card {
            transition: all 0.3s ease;
            /* Ø¶Ø®Ø§Ù…Øª Ø±Ø§ Ø¨Ù‡ 3px Ø§ÙØ²Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù… ØªØ§ Ø±Ù†Ú¯ Ø¨Ù‡ØªØ± Ø¯ÛŒØ¯Ù‡ Ø´ÙˆØ¯ */
            border: 3px solid transparent;
        }

        .phase-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        /* Ø±Ù†Ú¯â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø±Ø¯Ø±Ù‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ ÙØ§Ø² */
        .phase-card.phase-1 { border-color: #14B8A6; } /* Teal */
        .phase-card.phase-2 { border-color: #0EA5E9; } /* Sky */
        .phase-card.phase-3 { border-color: #8B5CF6; } /* Violet */
        .phase-card.phase-4 { border-color: #10B981; } /* Emerald */
        .phase-card.phase-5 { border-color: #F59E0B; } /* Amber */

        .part-link {
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .part-link:hover {
            transform: translateX(-5px);
            background: #F3F4F6;
        }

        .part-link.completed {
            background: #F0FDF4; /* Ø±Ù†Ú¯ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡ Ø¹Ù…ÙˆÙ…ÛŒ */
            border-right: 4px solid; /* Ø±Ù†Ú¯ Ø¨Ø±Ø¯Ø± ØªÙˆØ³Ø· JS ØªÙ†Ø¸ÛŒÙ… Ù…ÛŒâ€ŒØ´ÙˆØ¯ */
        }

        .part-link.locked {
            opacity: 0.6;
            pointer-events: none;
            cursor: not-allowed;
            background-color: #f3f4f6;
            filter: grayscale(1);
        }

        /* Ø¢ÛŒÚ©ÙˆÙ† Ù‚ÙÙ„ Ø¨Ø±Ø§ÛŒ Ø­Ø§Ù„Øª Locked */
        .part-link.locked::after {
            content: 'ğŸ”’';
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            opacity: 0.5;
        }

        .checkpoint-badge {
            background: linear-gradient(135deg, #F59E0B, #EF4444);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .progress-bar {
            transition: width 1s ease-out;
        }

        /* Control Panel Styles */
        .control-panel {
            display: flex;
            gap: 1rem;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid #e5e7eb;
        }

        .toggle-container {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.25rem;
            background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .toggle-container:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .toggle-container.unlocked {
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
        }

        .toggle-switch {
            position: relative;
            width: 56px;
            height: 28px;
            background: #9ca3af;
            border-radius: 14px;
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
        }

        .toggle-switch.active {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .toggle-slider {
            position: absolute;
            top: 2px;
            right: 2px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(-28px);
        }

        .reset-btn {
            padding: 0.75rem 1.25rem;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .reset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„ Ø¯Ú©Ù…Ù‡ Ù…Ù†Ø§Ø¨Ø¹ ÙˆÛŒÚ˜Ù‡ */
        .resources-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            text-decoration: none;
            font-weight: bold;
            margin-top: 1rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .resources-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(99, 102, 241, 0.3);
        }
    </style>
</head>
<body class="antialiased">

<div class="min-h-screen flex items-center justify-center p-4 md:p-8">
    <div class="w-full max-w-7xl">

        <!-- Header -->
        <header class="glass-card rounded-2xl shadow-2xl p-8 md:p-12 mb-8">
            <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                <div class="text-center md:text-right">
                    <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-3">
                        Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡
                        <span class="text-purple-600">(Ø¬Ø§ÙˆØ§)</span>
                    </h1>
                    <p class="text-xl text-gray-600 mb-4">Ù…Ø¯Ø±Ø³: Ø³ÛŒØ¯ Ø³Ø¬Ø§Ø¯ Ù¾ÛŒØ±Ø§Ù‡Ø´</p>
                    <p class="text-gray-500 mb-6">Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ø¢Ø²Ø§Ø¯ Ø§Ø³Ù„Ø§Ù…ÛŒ ÙˆØ§Ø­Ø¯ ØªØ¨Ø±ÛŒØ²</p>

                    <a href="resources.html" class="resources-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/>
                        </svg>
                        <span>Ø§Ø³Ù„Ø§ÛŒØ¯Ù‡Ø§ØŒ ÙˆÛŒØ¯ÛŒÙˆÙ‡Ø§ Ùˆ Ø§ÛŒÙ†ÙÙˆÚ¯Ø±Ø§ÙÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø³</span>
                    </a>
                </div>
                <!-- Ù„ÙˆÚ¯Ùˆ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ -->
                <div class="text-center">
                    <div class="w-32 h-32 bg-white rounded-full flex items-center justify-center shadow-xl overflow-hidden p-2">
                        <img src="assets/images/university_logo.png" alt="Ù„ÙˆÚ¯Ùˆ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡" class="w-full h-full object-contain" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22100%22 height=%22100%22%3E%3Crect fill=%22%2314B8A6%22 width=%22100%22 height=%22100%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2240%22 fill=%22white%22 text-anchor=%22middle%22 dy=%22.3em%22%3EJ%3C/text%3E%3C/svg%3E'">
                    </div>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="mt-8 pt-6 border-t border-gray-200">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-sm font-semibold text-gray-700">Ù¾ÛŒØ´Ø±ÙØª Ú©Ù„ÛŒ</span>
                    <span class="text-sm font-bold text-purple-600" id="progressText">Û° Ø§Ø² Û²Û° Ø¨Ø®Ø´ (Û°Ùª)</span>
                </div>
                <div class="w-full h-4 bg-gray-200 rounded-full overflow-hidden">
                    <div class="progress-bar h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full" id="progressBar" style="width: 0%"></div>
                </div>
                <p class="text-xs text-gray-500 mt-2 text-center" id="checkpointText">âœ… Û° Checkpoint ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡ Ø§Ø² Ûµ</p>
            </div>

            <!-- Control Panel -->
            <div class="control-panel">
                <div class="toggle-container" id="toggleContainer" onclick="toggleLock()">
                    <span class="toggle-icon" id="toggleIcon">ğŸ”’</span>
                    <div class="toggle-switch" id="toggleSwitch">
                        <div class="toggle-slider"></div>
                    </div>
                    <span class="toggle-label" id="toggleLabel">Ø¯Ø³ØªØ±Ø³ÛŒ ØªØ±ØªÛŒØ¨ÛŒ (Ù‚ÙÙ„ Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ)</span>
                </div>

                <button class="reset-btn" onclick="resetProgress()">
                    ğŸ”„ Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯ Ø¯ÙˆØ±Ù‡
                </button>
            </div>
        </header>

        <!-- Phases Container -->
        <div class="space-y-6" id="phasesContainer">
            <!-- Content generated by JS -->
        </div>

        <!-- Footer -->
        <footer class="glass-card rounded-2xl shadow-xl p-6 mt-8 text-center">
            <p class="text-gray-600 mb-2">
                <strong>ğŸ“š ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ø¨Ø®Ø´â€ŒÙ‡Ø§:</strong> Û²Û° Ø¨Ø®Ø´ Ø¢Ù…ÙˆØ²Ø´ÛŒ + Ûµ Checkpoint Ø¹Ù…Ù„ÛŒ
            </p>
            <p class="text-sm text-gray-500">
                Â© Û±Û´Û°Û´ - Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ø¢Ø²Ø§Ø¯ Ø§Ø³Ù„Ø§Ù…ÛŒ ÙˆØ§Ø­Ø¯ ØªØ¨Ø±ÛŒØ²
            </p>
        </footer>

    </div>
</div>

<script>
    // --- Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø³ ---
    const PARTS = [
        {num: 1, title: 'Ø§Ø² Ù¾Ø§Ø±Ø§Ø¯Ø§ÛŒÙ… ØªØ§ Ø¨Ø§ÛŒØªâ€ŒÚ©Ø¯', phase: 1},
        {num: 2, title: 'Ø§Ù†ÙˆØ§Ø¹ Ø¯Ø§Ø¯Ù‡ Ùˆ Ø­Ø§ÙØ¸Ù‡', phase: 1},
        {num: 3, title: 'static Ùˆ final', phase: 1},
        {num: 4, title: 'Ø¢Ø±Ø§ÛŒÙ‡â€ŒÙ‡Ø§', phase: 1},
        {num: 5, title: 'Ù…ØªØ¯Ù‡Ø§', phase: 1},
        {num: 6, title: 'Ø³Ø§Ø²Ù†Ø¯Ù‡â€ŒÙ‡Ø§ Ùˆ this', phase: 1},
        {num: 7, title: 'Ù¾Ú©ÛŒØ¬â€ŒØ¨Ù†Ø¯ÛŒ', phase: 1},
        {num: 8, title: 'ØªÙÚ©Ø± Ø´ÛŒØ¡Ú¯Ø±Ø§', phase: 2},
        {num: 9, title: 'Ù…Ø¨Ø§Ù†ÛŒ UML', phase: 2},
        {num: 10, title: 'Ø±ÙˆØ§Ø¨Ø· Ø¯Ø± UML', phase: 2},
        {num: 11, title: 'Ø§Ø±Ø«â€ŒØ¨Ø±ÛŒ', phase: 3},
        {num: 12, title: 'Upcasting Ùˆ Downcasting', phase: 3},
        {num: 13, title: 'Ø¨Ø§Ø²Ù†ÙˆÛŒØ³ÛŒ Ù…ØªØ¯Ù‡Ø§', phase: 3},
        {num: 14, title: 'Ú†Ù†Ø¯Ø±ÛŒØ®ØªÛŒ', phase: 3},
        {num: 15, title: 'Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø§Ù†ØªØ²Ø§Ø¹ÛŒ', phase: 4},
        {num: 16, title: 'Ø±Ø§Ø¨Ø·â€ŒÙ‡Ø§ (Interfaces)', phase: 4},
        {num: 17, title: 'ØªÚ©Ø§Ù…Ù„ Ø·Ø±Ø§Ø­ÛŒ', phase: 4},
        {num: 18, title: 'Collections Framework', phase: 5},
        {num: 19, title: 'Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø³ØªØ«Ù†Ø§Ù‡Ø§', phase: 5},
        {num: 20, title: 'Enum Types', phase: 5}
    ];

    const PHASES = [
        {num: 1, title: 'Ù…Ø¨Ø§Ù†ÛŒ Ùˆ Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§', desc: 'Ø¢Ø´Ù†Ø§ÛŒÛŒ Ø¨Ø§ Ù…ÙØ§Ù‡ÛŒÙ… Ù¾Ø§ÛŒÙ‡ Ø¬Ø§ÙˆØ§ Ùˆ Ø³Ø§Ø®ØªØ§Ø±Ù‡Ø§ÛŒ Ø¯Ø§Ø¯Ù‡'},
        {num: 2, title: 'ØªÙÚ©Ø± Ø´ÛŒØ¡Ú¯Ø±Ø§', desc: 'ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø§ØµÙˆÙ„ Ø·Ø±Ø§Ø­ÛŒ Ø´ÛŒØ¡Ú¯Ø±Ø§ Ùˆ UML'},
        {num: 3, title: 'Ø§Ø±Ø«â€ŒØ¨Ø±ÛŒ Ùˆ Ú†Ù†Ø¯Ø±ÛŒØ®ØªÛŒ', desc: 'Ù…ÙØ§Ù‡ÛŒÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡ OOP'},
        {num: 4, title: 'Ø§Ù†ØªØ²Ø§Ø¹', desc: 'Abstract Classes Ùˆ Interfaces'},
        {num: 5, title: 'Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡', desc: 'Collections, Exceptions Ùˆ Enums'}
    ];

    // Ù†Ú¯Ø§Ø´Øª Ø±Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Tailwind Ø¨Ø±Ø§ÛŒ Ù‡Ø± ÙØ§Ø²
    const phaseColors = {
        1: 'teal',    // #14B8A6
        2: 'sky',     // #0EA5E9
        3: 'violet',  // #8B5CF6
        4: 'emerald', // #10B981
        5: 'amber'    // #F59E0B
    };

    // --- ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ ---
    const toPersian = (num) => {
        const p = ['Û°','Û±','Û²','Û³','Û´','Ûµ','Û¶','Û·','Û¸','Û¹'];
        return String(num).split('').map(d => p[d] || d).join('');
    };

    // --- Ù…Ø¯ÛŒØ±ÛŒØª LocalStorage ---
    function getCompletedParts() {
        const stored = localStorage.getItem('completedParts');
        return stored ? JSON.parse(stored) : [];
    }

    // Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø±ÙˆÛŒ Ù„ÛŒÙ†Ú© Ú©Ù„ÛŒÚ© Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯
    function markPartComplete(partNum) {
        let completed = getCompletedParts();
        if (!completed.includes(partNum)) {
            completed.push(partNum);
            localStorage.setItem('completedParts', JSON.stringify(completed));
        }
    }

    function isPartCompleted(partNum) {
        return getCompletedParts().includes(partNum);
    }

    function isUnlocked() {
        return localStorage.getItem('unlocked') === 'true';
    }

    function isPartAccessible(partNum) {
        if (isUnlocked()) return true;
        if (partNum === 1) return true;
        return isPartCompleted(partNum - 1);
    }

    // --- Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ÛŒ UI ---
    function toggleLock() {
        const currentState = isUnlocked();
        const newState = !currentState;

        if (newState) {
            localStorage.setItem('unlocked', 'true');
        } else {
            localStorage.removeItem('unlocked');
        }
        updateToggleUI(newState);
        generatePhases();
    }

    function updateToggleUI(unlocked) {
        const container = document.getElementById('toggleContainer');
        const switchEl = document.getElementById('toggleSwitch');
        const icon = document.getElementById('toggleIcon');
        const label = document.getElementById('toggleLabel');

        if (unlocked) {
            container.classList.add('unlocked');
            switchEl.classList.add('active');
            icon.textContent = 'ğŸ”“';
            label.textContent = 'Ø¯Ø³ØªØ±Ø³ÛŒ Ø¢Ø²Ø§Ø¯ (Ù‡Ù…Ù‡ Ø¨Ø§Ø²)';
        } else {
            container.classList.remove('unlocked');
            switchEl.classList.remove('active');
            icon.textContent = 'ğŸ”’';
            label.textContent = 'Ø¯Ø³ØªØ±Ø³ÛŒ ØªØ±ØªÛŒØ¨ÛŒ (Ù‚ÙÙ„)';
        }
    }

    function resetProgress() {
        if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ ØªÙ…Ø§Ù… ØªÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø³Ø¨Ø² Ø­Ø°Ù Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ Ùˆ Ø¨Ø§ÛŒØ¯ Ø§Ø² Ø§ÙˆÙ„ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØ¯.')) {
            localStorage.removeItem('completedParts');
            location.reload();
        }
    }

    function updateProgress() {
        const completed = getCompletedParts().length;
        const total = 20;
        const percentage = Math.round((completed / total) * 100);

        document.getElementById('progressText').textContent =
            `${toPersian(completed)} Ø§Ø² ${toPersian(total)} Ø¨Ø®Ø´ (${toPersian(percentage)}Ùª)`;

        document.getElementById('progressBar').style.width = percentage + '%';

        const checkpoints = Math.floor(completed / 4);
        document.getElementById('checkpointText').textContent =
            `âœ… ${toPersian(checkpoints)} Checkpoint ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡ Ø§Ø² Ûµ`;
    }

    // --- ØªÙˆÙ„ÛŒØ¯ Ù…Ø­ØªÙˆØ§ ---
    function generatePhases() {
        const container = document.getElementById('phasesContainer');
        container.innerHTML = '';

        PHASES.forEach(phase => {
            const phaseParts = PARTS.filter(p => p.phase === phase.num);
            const phaseDiv = document.createElement('div');
            const color = phaseColors[phase.num]; // Ø¯Ø±ÛŒØ§ÙØª Ø±Ù†Ú¯ ÙØ§Ø²

            phaseDiv.className = `glass-card rounded-2xl shadow-xl p-6 md:p-8 phase-card phase-${phase.num}`;

            const completedCount = phaseParts.filter(p => isPartCompleted(p.num)).length;
            const totalCount = phaseParts.length;

            let partsHTML = '<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">';

            phaseParts.forEach(part => {
                const accessible = isPartAccessible(part.num);
                const completed = isPartCompleted(part.num);

                const completedClass = completed ? 'completed' : '';
                const lockedClass = !accessible ? 'locked' : '';

                // Ø±Ù†Ú¯ Ø¢ÛŒÚ©ÙˆÙ† Ø¯Ø§Ø®Ù„ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø±Ù†Ú¯ ÙØ§Ø²
                // Ø§Ú¯Ø± ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ø§Ø² Ø±Ù†Ú¯ ÙØ§Ø² Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŒ Ø¯Ø± ØºÛŒØ± Ø§ÛŒÙ† ØµÙˆØ±Øª Ø®Ø§Ú©Ø³ØªØ±ÛŒ
                const iconBg = completed ? `bg-${color}-500` : 'bg-gray-300';
                const iconText = completed ? 'text-white' : 'text-gray-600';

                // ØªÙ†Ø¸ÛŒÙ… Ø±Ù†Ú¯ Ø¨Ø±Ø¯Ø± Ø³Ù…Øª Ø±Ø§Ø³Øª Ø¨Ø±Ø§ÛŒ Ø­Ø§Ù„Øª ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡ Ø¨Ù‡ ØµÙˆØ±Øª inline style
                // Ú†ÙˆÙ† Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Tailwind dynamic Ø¯Ø± CDN Ù…Ù…Ú©Ù† Ø§Ø³Øª Ú©Ø§Ø± Ù†Ú©Ù†Ù†Ø¯ØŒ Ø§Ø³ØªØ§ÛŒÙ„ Ø¯Ø³ØªÛŒ Ø§Ù…Ù†â€ŒØªØ± Ø§Ø³Øª
                const borderStyle = completed ? `border-right-color: var(--color-${color});` : '';

                partsHTML += `
                <a href="parts/part${String(part.num).padStart(2, '0')}.html"
                   onclick="markPartComplete(${part.num})"
                   style="${completed ? `border-right-color: ${getHexColor(color)};` : ''}"
                   class="part-link ${completedClass} ${lockedClass} block p-4 bg-white rounded-lg border border-gray-200">
                    <div class="flex items-center gap-3">
                        <span class="flex-shrink-0 w-8 h-8 ${iconBg} ${iconText} rounded-lg flex items-center justify-center font-bold text-sm transition-colors">
                            ${toPersian(part.num)}
                        </span>
                        <span class="text-sm font-medium text-gray-700">${part.title}</span>
                    </div>
                </a>
            `;
            });

            partsHTML += '</div>';

            // Ø¨Ø¬ ÙˆØ¶Ø¹ÛŒØª (Ù…Ø«Ù„Ø§Ù‹ "2 / 4 Ø¨Ø®Ø´")
            const badgeBg = completedCount > 0 ? `bg-${color}-100` : 'bg-gray-100';
            const badgeText = completedCount > 0 ? `text-${color}-700` : 'text-gray-500';

            phaseDiv.innerHTML = `
            <div class="flex items-center gap-4 mb-6">
                <div class="w-16 h-16 bg-${color}-500 rounded-xl flex items-center justify-center text-white text-2xl font-bold shadow-lg">
                    ${toPersian(phase.num)}
                </div>
                <div class="flex-1">
                    <h2 class="text-2xl md:text-3xl font-bold text-gray-800">ÙØ§Ø² ${toPersian(phase.num)}: ${phase.title}</h2>
                    <p class="text-gray-600 mt-1">${phase.desc}</p>
                </div>
                <div class="text-left">
                    <span class="inline-block px-4 py-2 ${badgeBg} ${badgeText} rounded-lg font-bold text-sm">
                        ${toPersian(completedCount)} / ${toPersian(totalCount)} Ø¨Ø®Ø´ ${completedCount === totalCount ? 'âœ“' : ''}
                    </span>
                </div>
            </div>
            ${partsHTML}
        `;

            container.appendChild(phaseDiv);
        });
    }

    // ØªØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ Ø¨Ø±Ø§ÛŒ ØªØ¨Ø¯ÛŒÙ„ Ù†Ø§Ù… Ø±Ù†Ú¯ Ø¨Ù‡ Ú©Ø¯ Ù‡Ú¯Ø² (Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªØ§ÛŒÙ„ Ø®Ø·ÛŒ)
    function getHexColor(colorName) {
        const map = {
            'teal': '#14B8A6',
            'sky': '#0EA5E9',
            'violet': '#8B5CF6',
            'emerald': '#10B981',
            'amber': '#F59E0B'
        };
        return map[colorName] || '#14B8A6';
    }

    // --- Ø´Ø±ÙˆØ¹ Ø¨Ø±Ù†Ø§Ù…Ù‡ ---
    window.addEventListener('load', () => {
        updateToggleUI(isUnlocked());
        generatePhases();
        updateProgress();

        setTimeout(() => {
            const completed = getCompletedParts().length;
            const percentage = Math.round((completed / 20) * 100);
            document.getElementById('progressBar').style.width = percentage + '%';
        }, 300);
    });
</script>

</body>
</html>