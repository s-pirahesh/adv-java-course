/* Import Google Font - Vazirmatn */
@import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap');

:root {
    --font-sans: "Vazirmatn", sans-serif;
    --code-font: 'SFMono-Regular', Consolas, Menlo, monospace;
}

/* =================================== */
/* Theme Definitions using CSS Variables */
/* =================================== */

/* Chapter 1: Transition to OOP (Teal/Mint Theme) */
body.theme-transition {
    --primary-color: #0D9488;
    --secondary-color: #14B8A6;
    --border-color: #5EEAD4;
    --background-color: #F0FDFA;
    --text-color: #1F2937;
    --sidebar-bg: linear-gradient(180deg, #134E4A 0%, #115E59 100%);
    --sidebar-text: #CCFBF1;
    --sidebar-link-text: #99F6E4;
    --sidebar-link-active-bg: #14B8A6;
    --sidebar-link-active-text: #064E3B;
    --sidebar-header-border: #115E59;
    --mobile-header-bg: #134E4A;
    --sidebar-footer-bg: #0F766E; /* New */
    --sidebar-footer-button-bg: rgba(20, 184, 166, 0.2); /* New */
    --sidebar-footer-button-hover-bg: rgba(20, 184, 166, 0.4); /* New */
}

/* Chapter 2: Java Basics (Amber/Orange Theme) */
body.theme-basics {
    --primary-color: #D97706;
    --secondary-color: #F59E0B;
    --border-color: #FBBF24;
    --background-color: #FFFBEB;
    --text-color: #44403C;
    --sidebar-bg: linear-gradient(180deg, #78350F 0%, #92400E 100%);
    --sidebar-text: #FEF3C7;
    --sidebar-link-text: #FDE68A;
    --sidebar-link-active-bg: #F59E0B;
    --sidebar-link-active-text: #78350F;
    --sidebar-header-border: #92400E;
    --mobile-header-bg: #78350F;
    --sidebar-footer-bg: #B45309; /* New */
    --sidebar-footer-button-bg: rgba(245, 158, 11, 0.2); /* New */
    --sidebar-footer-button-hover-bg: rgba(245, 158, 11, 0.4); /* New */
}

/* ... (متغیرهای جدید برای سایر تم‌ها نیز به همین شکل اضافه شده‌اند) ... */

/* Chapter 3: Setup & First Program (Sky Blue Theme) */
body.theme-setup {
    --primary-color: #0284C7;
    --secondary-color: #0EA5E9;
    --border-color: #7DD3FC;
    --background-color: #F0F9FF;
    --text-color: #1E293B;
    --sidebar-bg: linear-gradient(180deg, #0C4A6E 0%, #075985 100%);
    --sidebar-text: #E0F2FE;
    --sidebar-link-text: #BAE6FD;
    --sidebar-link-active-bg: #0EA5E9;
    --sidebar-link-active-text: #082F49;
    --sidebar-header-border: #075985;
    --mobile-header-bg: #0C4A6E;
    --sidebar-footer-bg: #0369A1; /* New */
    --sidebar-footer-button-bg: rgba(14, 165, 233, 0.2); /* New */
    --sidebar-footer-button-hover-bg: rgba(14, 165, 233, 0.4); /* New */
}

/* Chapter 4: Core OOP Concepts (Indigo/Violet Theme) */
body.theme-core-oop {
    --primary-color: #4F46E5;
    --secondary-color: #6366F1;
    --border-color: #A5B4FC;
    --background-color: #EEF2FF;
    --text-color: #1E1B4B;
    --sidebar-bg: linear-gradient(180deg, #312E81 0%, #4338CA 100%);
    --sidebar-text: #E0E7FF;
    --sidebar-link-text: #C7D2FE;
    --sidebar-link-active-bg: #6366F1;
    --sidebar-link-active-text: #1E1B4B;
    --sidebar-header-border: #4338CA;
    --mobile-header-bg: #312E81;
    --sidebar-footer-bg: #4338CA; /* New */
    --sidebar-footer-button-bg: rgba(99, 102, 241, 0.2); /* New */
    --sidebar-footer-button-hover-bg: rgba(99, 102, 241, 0.4); /* New */
}

/* Chapter 5: Design & Diagrams (Slate Gray Theme) */
body.theme-design {
    --primary-color: #475569;
    --secondary-color: #64748B;
    --border-color: #CBD5E1;
    --background-color: #F8FAFC;
    --text-color: #1E293B;
    --sidebar-bg: linear-gradient(180deg, #1E293B 0%, #334155 100%);
    --sidebar-text: #F1F5F9;
    --sidebar-link-text: #E2E8F0;
    --sidebar-link-active-bg: #64748B;
    --sidebar-link-active-text: #0F172A;
    --sidebar-header-border: #475569;
    --mobile-header-bg: #1E293B;
    --sidebar-footer-bg: #334155; /* New */
    --sidebar-footer-button-bg: rgba(100, 116, 139, 0.2); /* New */
    --sidebar-footer-button-hover-bg: rgba(100, 116, 139, 0.4); /* New */
}

/* Chapter 6: Data Structures (Lime/Green Theme) */
body.theme-datastruct {
    --primary-color: #4D7C0F;
    --secondary-color: #65A30D;
    --border-color: #A3E635;
    --background-color: #F7FEE7;
    --text-color: #1A2E05;
    --sidebar-bg: linear-gradient(180deg, #365314 0%, #4D7C0F 100%);
    --sidebar-text: #ECFCCB;
    --sidebar-link-text: #D9F99D;
    --sidebar-link-active-bg: #84CC16;
    --sidebar-link-active-text: #1A2E05;
    --sidebar-header-border: #4D7C0F;
    --mobile-header-bg: #365314;
    --sidebar-footer-bg: #4D7C0F; /* New */
    --sidebar-footer-button-bg: rgba(132, 204, 22, 0.2); /* New */
    --sidebar-footer-button-hover-bg: rgba(132, 204, 22, 0.4); /* New */
}

/* Chapter 7: Advanced OOP (Rose/Purple Theme) */
body.theme-advanced-oop {
    --primary-color: #9D174D;
    --secondary-color: #BE185D;
    --border-color: #F472B6;
    --background-color: #FFF1F2;
    --text-color: #500724;
    --sidebar-bg: linear-gradient(180deg, #831843 0%, #9D174D 100%);
    --sidebar-text: #FCE7F3;
    --sidebar-link-text: #FBCFE8;
    --sidebar-link-active-bg: #EC4899;
    --sidebar-link-active-text: #500724;
    --sidebar-header-border: #9D174D;
    --mobile-header-bg: #831843;
    --sidebar-footer-bg: #9D174D; /* New */
    --sidebar-footer-button-bg: rgba(236, 72, 153, 0.2); /* New */
    --sidebar-footer-button-hover-bg: rgba(236, 72, 153, 0.4); /* New */
}

/* Chapter 8: Exceptions & More (Red/Stone Theme) */
body.theme-exceptions {
    --primary-color: #B91C1C;
    --secondary-color: #DC2626;
    --border-color: #F87171;
    --background-color: #FEF2F2;
    --text-color: #450A0A;
    --sidebar-bg: linear-gradient(180deg, #7F1D1D 0%, #991B1B 100%);
    --sidebar-text: #FEE2E2;
    --sidebar-link-text: #FECACA;
    --sidebar-link-active-bg: #EF4444;
    --sidebar-link-active-text: #450A0A;
    --sidebar-header-border: #991B1B;
    --mobile-header-bg: #7F1D1D;
    --sidebar-footer-bg: #991B1B; /* New */
    --sidebar-footer-button-bg: rgba(239, 68, 68, 0.2); /* New */
    --sidebar-footer-button-hover-bg: rgba(239, 68, 68, 0.4); /* New */
}

/* =================================== */
/* Structural & Common Styles */
/* =================================== */
body {
    font-family: var(--font-sans);
    line-height: 1.8;
    background-color: var(--background-color);
    color: var(--text-color);
}

#sidebar {
    width: 300px;
    background: var(--sidebar-bg);
    color: var(--sidebar-text);
    position: fixed;
    top: 0;
    right: 0;
    height: 100vh;
    overflow-y: auto;
    transition: transform .3s ease-in-out;
    z-index: 1000;
    display: flex;
    flex-direction: column;
}

#main-content {
    margin-right: 300px;
    padding: 2rem 3rem;
    transition: margin-right .3s ease-in-out;
}

/* =================================== */
/* Sidebar Content Styles */
/* =================================== */
.sidebar-profile {
    padding: 1rem;
    text-align: center;
    border-bottom: 1px solid var(--sidebar-header-border);
}

.sidebar-profile img {
    width: 70px;
    height: 70px;
    margin: 0 auto 0.5rem auto;
    border-radius: 50%;
}

.sidebar-profile .course-title {
    font-weight: 700;
    font-size: 1.2rem;
}

.sidebar-profile .instructor-name {
    font-size: 0.9rem;
    color: var(--sidebar-link-text);
}

#sidebar header {
    padding: 1rem;
    font-weight: 600;
    font-size: 1.1rem;
    border-bottom: 1px solid var(--sidebar-header-border);
}

.nav-menu, .submenu {
    list-style: none;
    padding: 0;
    margin: 0;
}

.nav-menu a, .nav-header {
    display: block;
    padding: .6rem 1.5rem;
    text-decoration: none;
    transition: background .2s, color .2s;
    cursor: pointer;
    user-select: none;
}

.nav-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.nav-header.level-1 {
    font-weight: 700;
    font-size: 1rem;
    color: var(--sidebar-text);
}

.nav-menu .nav-link {
    font-size: 0.9rem;
    padding-right: 2.5rem;
    color: var(--sidebar-link-text);
}

.nav-menu a.active, .nav-menu a:hover {
    background: var(--sidebar-link-active-bg);
    color: var(--sidebar-link-active-text);
}

.submenu {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease-in-out;
}

.submenu.open {
    max-height: 1000px;
}

.nav-header::after {
    content: '◀';
    transition: transform .2s;
    font-size: 0.8em;
}

.nav-header.open::after {
    transform: rotate(-90deg);
}

/* =================================== */
/* Main Content Styles */
/* =================================== */
#main-content section {
    padding-top: 2rem;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 2rem;
}

#main-content section:last-of-type {
    border-bottom: none;
}

#main-content h2 {
    font-size: 1.8rem;
    font-weight: 600;
    color: var(--primary-color);
    margin-bottom: 1rem;
}

#main-content h3 {
    font-size: 1.4rem;
    font-weight: 600;
    color: var(--secondary-color);
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
}

.code-block-container {
    position: relative;
    margin: 1.5rem 0;
    border-radius: 8px;
    overflow: hidden;
    background-color: #272822;
}

.copy-button {
    position: absolute;
    top: 0.75rem;
    left: 0.75rem;
    background-color: var(--secondary-color);
    color: var(--background-color);
    padding: 0.25rem 0.75rem;
    font-size: 0.8rem;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    opacity: 0;
    transition: all 0.2s;
    font-family: var(--font-sans);
}

.code-block-container:hover .copy-button {
    opacity: 1;
}

.copy-button:disabled {
    background-color: var(--primary-color);
}

.chapter-nav {
    display: flex;
    justify-content: flex-end;
    margin-top: 3rem;
}

.chapter-nav a {
    display: inline-block;
    background-color: var(--primary-color);
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    transition: transform 0.2s, box-shadow 0.2s;
}

.chapter-nav a:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

/* =================================== */
/* Mobile & Responsive Styles */
/* =================================== */
/*#mobile-header { display: none; position: fixed; top: 0; right: 0; left: 0; background-color: var(--mobile-header-bg); color: var(--sidebar-text); padding: 1rem; z-index: 500; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); align-items: center; }*/
/*#menu-toggle { background: none; border: none; color: inherit; font-size: 1.5rem; cursor: pointer; }*/
/*#overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 999; }*/

/*@media (max-width: 1024px) {*/
/*    #sidebar { transform: translateX(300px); }*/
/*    #sidebar.open { transform: translateX(0); }*/
/*    #main-content { margin-right: 0; padding: 1.5rem; padding-top: 6rem; }*/
/*    #mobile-header { display: flex; gap: 1rem; }*/
/*    #overlay.open { display: block; }*/
/*}*/

.sidebar-profile img {
    width: 80px;
    height: 80px;
    margin: 0 auto 1rem auto;
    border-radius: 50%;
    border: 3px solid var(--sidebar-link-text);
}

.sidebar-profile .course-title {
    font-weight: 700;
    font-size: 1.2rem;
    color: var(--sidebar-text);
}

.sidebar-profile .instructor-name {
    font-size: 0.9rem;
    color: var(--sidebar-link-text);
    margin-top: 0.25rem;
}

.sidebar-footer {
    padding: 0.75rem;
    margin-top: auto;
    border-top: 1px solid var(--sidebar-header-border);
    background-color: var(--sidebar-footer-bg);
}

.sidebar-footer a {
    display: block;
    padding: 0.6rem;
    text-align: center;
    color: var(--sidebar-link-text);
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 600;
    border-radius: 6px;
    background-color: var(--sidebar-footer-button-bg);
    transition: background-color 0.2s, color 0.2s;
}

.sidebar-footer a:hover {
    color: var(--sidebar-text);
    background-color: var(--sidebar-footer-button-hover-bg);
}

/* =================================== */
/* Mobile & Responsive Styles */
/* =================================== */

#top-header {
    display: flex; /* همیشه نمایش داده شود */
    position: fixed;
    top: 0;
    right: 0;
    left: 0;
    background-color: var(--mobile-header-bg);
    color: var(--sidebar-text);
    padding: 1rem;
    z-index: 500;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    align-items: center;
    gap: 1rem;
    /* این خط برای جابجایی هدر از زیر سایدبار اضافه شد */
    margin-right: 300px;
}

#menu-toggle {
    background: none;
    border: none;
    color: inherit;
    font-size: 1.5rem;
    cursor: pointer;
    display: none; /* در دسکتاپ مخفی است */
}

#overlay {
    display: none; /* Hidden by default */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    z-index: 999;
}

/* محتوای اصلی همیشه به اندازه هدر بالایی فاصله از بالا دارد */
#main-content {
    margin-right: 300px;
    padding: 2rem 3rem;
    padding-top: 6rem; /* فضا برای هدر ثابت بالایی */
    transition: margin-right .3s ease-in-out;
}

@media (max-width: 1024px) {
    #sidebar {
        transform: translateX(300px); /* Hide sidebar off-screen */
    }

    #sidebar.open {
        transform: translateX(0); /* Show sidebar */
    }

    #main-content {
        margin-right: 0;
        padding: 1.5rem;
        padding-top: 6rem; /* Space for the fixed mobile header */
    }

    #menu-toggle {
        display: block; /* دکمه منو در موبایل نمایش داده می‌شود */
    }

    #overlay.open {
        display: block; /* Show overlay when menu is open */
    }

    #top-header {
        margin-right: 0; /* در موبایل هدر نیازی به فاصله از سایدبار ندارد */
    }
}


/* =================================== */
/* Print Styles */
/* =================================== */
@media print {
    body {
        --background-color: #fff;
        --text-color: #000;
        display: block;
    }

    /* مخفی کردن تمام عناصر غیرضروری */
    #sidebar, #top-header, .copy-button, .chapter-nav, #menu-toggle, #overlay {
        display: none !important;
    }

    /* نمایش تمام بخش‌های محتوایی که ممکن است مخفی باشند */
    #main-content section {
        display: block !important;
        border-bottom: 1px solid #ccc; /* یک جداکننده ساده بین بخش‌ها */
        page-break-inside: avoid; /* جلوگیری از شکستن بخش‌ها در وسط صفحه */
    }

    /* بازنشانی مارجین و پدینگ محتوای اصلی برای پرینت */
    #main-content {
        margin-right: 0 !important;
        width: 100% !important;
        padding: 1cm !important;
        padding-top: 0 !important; /* حذف فاصله اضافی بالا */
    }

    /* جلوگیری از شکستن عناوین */
    h1, h2, h3 {
        page-break-after: avoid;
    }

    /* استایل ساده برای لینک‌ها در پرینت */
    a {
        text-decoration: none;
        color: inherit;
    }

    #top-header {
        display: block !important; /* مطمئن می‌شویم که نمایش داده شود */
        position: static !important; /* از حالت fixed خارج شود */
        color: #000 !important; /* رنگ متن برای پرینت */
        background-color: #f0f0f0 !important; /* پس‌زمینه روشن‌تر */
        box-shadow: none !important; /* حذف سایه */
        margin-right: 0 !important; /* تنظیم مجدد مارجین */
        padding: 1cm !important;
        text-align: center;
        border-bottom: 2px solid #ccc; /* خط جداکننده */
        page-break-after: avoid; /* جلوگیری از شکستن صفحه بلافاصله بعد از هدر */
    }

    /* پنهان کردن top-header در صفحات بعدی پرینت */
    @page {
        margin-top: 0;
        /* این کد تضمین می‌کند که هدر فقط در صفحه اول دیده شود */
        /* در واقعیت، برای کنترل دقیق تکرار هدر در صفحات، نیاز به JavaScript پیچیده‌تر است */
        /* اما این روش، هدر را در اولین صفحه نمایش می‌دهد و در صفحات بعدی، محتوا از بالا شروع می‌شود */
    }
}
